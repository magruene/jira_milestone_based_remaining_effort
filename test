<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<script>var gadget;gadget=AJS.Gadget({baseUrl:"http://jira.swisscom.com",view:{onResizeAdjustHeight:!0,template:function(){function t(){e();var t="http://jira.swisscom.com/rest/api/2/search?maxResults=500&jql=project=SAM and team in (Skipper, Catta, Yankee, Private, Rico, Kowalski) and status != Closed and issueType = Epic and fixVersion='"+AJS.$("#versionChooser").val()+"'";o(t,a),AJS.$.each(d,function(t,e){for(var a=u;a>0;a--){AJS.$("#"+e).append('<td id="past'+a+'"></td>');var i="http://jira.swisscom.com/rest/api/2/search?maxResults=500&jql=project=SAM and team="+e+" and issuetype=Story and resolutiondate >=-"+a+"w";s(i,e,a,n)}})}function e(){AJS.$("tbody").empty(),AJS.$("tbody").append('<tr id="Skipper"><td>Skipper</td></tr>'),AJS.$("tbody").append('<tr id="Catta"><td>Catta</td></tr>'),AJS.$("tbody").append('<tr id="Yankee"><td>Yankee</td></tr>'),AJS.$("tbody").append('<tr id="Private"><td>Private</td></tr>'),AJS.$("tbody").append('<tr id="Rico"><td>Rico</td></tr>'),AJS.$("tbody").append('<tr id="Kowalski"><td>Kowalski</td></tr>'),c.resize()}function n(t,e,n){AJS.$("#"+t+" #past"+e).text("-"+r(n))}function a(t){var e=_.groupBy(t,function(t){return t.fields.customfield_14850.value});AJS.$.each(_.keys(e),function(t,n){AJS.$.each(p,function(t,e){AJS.$("#"+n).append('<td id="'+e+'"></td>'),AJS.$("#"+n+" #"+e).text("0")});var a=e[n],o=_.groupBy(a,function(t){var e=_.find(t.fields.labels,function(t){return _.contains(p,t)});return void 0!=e?e:"NotSpecified"}),s=[];for(var r in o)s.push(r);s.sort(function(t,e){return e>t?1:t>e?-1:0});var c=0;AJS.$.each(s,function(t,e){if("NotSpecified"!==e){var a="http://jira.swisscom.com/rest/api/2/search?maxResults=500&jql='Epic Link' in ("+_.pluck(o[e],"key").join(", ")+") and status != Closed";AJS.$.ajax({url:a,async:!1,contentType:"application/json",dataType:"json",success:function(t){c+=i(t.issues),AJS.$("#"+n+" #"+e).text(Math.round(c/28800*100)/100)}})}})})}function i(t){var e=_.pluck(t,"fields"),n=_.pluck(e,"timeoriginalestimate");return _.reduce(n,function(t,e){return null!==e?t+e:t},0)}function o(t,e){return AJS.$.ajax({url:t,contentType:"application/json",dataType:"json",success:function(t){e(t.issues)}})}function s(t,e,n,a){return AJS.$.ajax({url:t,contentType:"application/json",dataType:"json",success:function(t){a(e,n,t.issues)}})}function r(t){var e=0;return AJS.$.each(t,function(t,n){e+=n.fields.timeoriginalestimate/28800}),Math.round(100*e)/100}var c=this,d=["Skipper","Catta","Yankee","Private","Rico","Kowalski"],p=["R-20","R-19","R-18","R-17","R-16","R-15","R-14","R-13","R-12","R-11","R-10","R-9","R-8","R-7","R-6","R-5","R-4","R-3","R-2","R-1","R-0","R1"],u=8;e(),AJS.$.ajax({url:"http://jira.swisscom.com/rest/api/2/project/SAM/versions",contentType:"application/json",dataType:"json",success:function(e){AJS.$.each(e,function(t,e){e.released||AJS.$("#versionChooser").append("<option value='"+e.name+"'>"+e.name+"</option>")}),AJS.$("button").click(t)}})}}});</script>
<div class="row-fluid"><div class="col-lg-1 well"><form class="form-horizontal"><div class="row-fluid"><div class="form-group"><label for="versionChooser">Version</label><select id="versionChooser"></select></div></div><div class="row-fluid"><button type="button" class="btn btn-info">Get data</button></div></form></div><div class="col-lg-11"><table class="table table-stripped" id="reportTable"><thead><tr><th>Team</th><th>-8</th><th>-7</th><th>-6</th><th>-5</th><th>-4</th><th>-3</th><th>-2</th><th>-1</th><th>R-20</th><th>R-19</th><th>R-18</th><th>R-17</th><th>R-16</th><th>R-15</th><th>R-14</th><th>R-13</th><th>R-12</th><th>R-11</th><th>R-10</th><th>R-9</th><th>R-8</th><th>R-7</th><th>R-6</th><th>R-5</th><th>R-4</th><th>R-3</th><th>R-2</th><th>R-1</th><th>R+0</th><th>R+1</th></tr></thead><tbody></tbody></table></div></div>